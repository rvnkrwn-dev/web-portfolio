---
import Layout from "../../layouts/Layout.astro";
import { PROJECTS } from "../../config/site";

export function getStaticPaths() {
  return PROJECTS.items.map((project) => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props;
---

<Layout title={`${project.title} - Revan Kurniawan`} description={project.description}>
  <main class="project-detail">
    <!-- Hero Section -->
    <section class="hero-section">
      <div class="container">
        <a href="/#projects" class="back-link">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
          </svg>
          Back to Projects
        </a>
        
        <div class="hero-content">
          <div class="hero-header">
            <span class="project-category">{project.category}</span>
            <h1 class="project-title">{project.title}</h1>
            <p class="project-tagline">{project.tagline}</p>
          </div>

          <div class="project-meta">
            <div class="tech-stack">
              {project.tags.map((tag) => (
                <span class="tech-badge">{tag}</span>
              ))}
            </div>
            <div class="project-links">
              {project.link && (
                <a href={project.link} target="_blank" rel="noopener noreferrer" class="primary-btn">
                  Live Demo
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                    <polyline points="15 3 21 3 21 9"></polyline>
                    <line x1="10" y1="14" x2="21" y2="3"></line>
                  </svg>
                </a>
              )}
              {project.github && (
                <a href={project.github} target="_blank" rel="noopener noreferrer" class="secondary-btn">
                  GitHub Repo
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
                  </svg>
                </a>
              )}
            </div>
          </div>
        </div>

        <div class="hero-image">
          <img src={project.image} alt={`${project.title} Preview`} />
        </div>
      </div>
    </section>

    <!-- Overview Section -->
    <section class="content-section overview-section">
      <div class="container container-sm">
        <div class="overview-grid">
          <div class="overview-item">
            <h3>Purpose</h3>
            <p>{project.overview?.purpose}</p>
          </div>
          <div class="overview-item">
            <h3>My Role</h3>
            <p>{project.overview?.role}</p>
          </div>
          <div class="overview-item">
            <h3>Status</h3>
            <p>{project.overview?.status}</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Problem & Solution -->
    <section class="content-section split-section bg-secondary">
      <div class="container container-sm">
        <div class="content-block mb-16">
          <h2 class="section-heading">The Problem</h2>
          <p class="body-large">{project.problemStatement}</p>
        </div>
        <div class="content-block">
          <h2 class="section-heading">The Solution</h2>
          <p class="body-large">{project.solution}</p>
        </div>
      </div>
    </section>

    <!-- Architecture & Features -->
    <section class="content-section">
      <div class="container container-sm">
        <div class="content-block mb-16">
          <h2 class="section-heading">Tech Stack & Architecture</h2>
          <div class="arch-card">
            <div class="arch-item">
              <span class="arch-label">Frontend</span>
              <span class="arch-value">{project.architecture?.frontend || "N/A"}</span>
            </div>
            <div class="arch-item">
              <span class="arch-label">Backend</span>
              <span class="arch-value">{project.architecture?.backend || "N/A"}</span>
            </div>
            <div class="arch-item">
              <span class="arch-label">Database</span>
              <span class="arch-value">{project.architecture?.database || "N/A"}</span>
            </div>
            <div class="arch-item">
              <span class="arch-label">Deployment</span>
              <span class="arch-value">{project.architecture?.deployment || "N/A"}</span>
            </div>
          </div>
          <p class="arch-reason"><strong>Why these technologies?</strong> {project.architecture?.reasons}</p>
        </div>

        <div class="content-block">
          <h2 class="section-heading">Key Features</h2>
          <ul class="features-list">
            {project.features?.map((feature) => (
              <li>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
                <span>{feature}</span>
              </li>
            ))}
          </ul>
        </div>
      </div>
    </section>

    <!-- Challenges & Impact -->
    <section class="content-section bg-secondary">
      <div class="container container-sm">
        <div class="content-block mb-16">
          <h2 class="section-heading">Challenges & Solutions</h2>
          <div class="challenges-list">
            {project.challenges?.map((item) => (
              <div class="challenge-card">
                <div class="challenge-part">
                  <h4>Challenge</h4>
                  <p>{item.challenge}</p>
                </div>
                <div class="solution-part">
                  <h4>Solution</h4>
                  <p>{item.solution}</p>
                </div>
              </div>
            ))}
          </div>
        </div>

        <div class="content-block">
          <h2 class="section-heading">Impact & Results</h2>
          <div class="impact-card">
            <svg class="impact-icon" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
              <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
            <p class="body-large">{project.impact}</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Next Project Navigation (Optional future improvement) -->
    <section class="bottom-nav">
      <div class="container">
        <div class="cta-wrapper">
          <h2 class="cta-title">Interested in working together?</h2>
          <a href="/#contact" class="primary-btn">Get In Touch</a>
        </div>
      </div>
    </section>
  </main>
</Layout>

<style>
  :root {
    --bg-primary: #09090b;
    --bg-secondary: #18181b;
    --text-primary: #ffffff;
    --text-secondary: #a1a1aa;
    --border-color: rgba(255, 255, 255, 0.1);
    --accent: #ffffff;
  }

  .project-detail {
    background: var(--bg-primary);
    color: var(--text-primary);
    padding-top: 6rem;
  }

  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 2rem;
  }

  .container-sm {
    max-width: 800px;
  }

  /* Section Utitilities */
  .content-section {
    padding: 6rem 0;
  }
  
  .bg-secondary {
    background-color: var(--bg-secondary);
  }

  .mb-16 {
    margin-bottom: 4rem;
  }

  .section-heading {
    font-size: 2rem;
    font-weight: 300;
    margin-bottom: 2rem;
    color: var(--text-primary);
    letter-spacing: -0.02em;
  }

  .body-large {
    font-size: 1.125rem;
    line-height: 1.8;
    color: var(--text-secondary);
    font-weight: 300;
  }

  /* Hero Section */
  .hero-section {
    padding: 4rem 0 6rem;
    position: relative;
  }

  .back-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-secondary);
    text-decoration: none;
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 3rem;
    transition: color 0.3s ease;
  }

  .back-link:hover {
    color: var(--text-primary);
  }

  .hero-content {
    margin-bottom: 4rem;
  }

  .project-category {
    display: inline-block;
    color: var(--text-secondary);
    font-size: 0.875rem;
    font-weight: 400;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    margin-bottom: 1.5rem;
  }

  .project-title {
    font-size: clamp(3rem, 6vw, 5rem);
    font-weight: 300;
    line-height: 1.1;
    margin-bottom: 1.5rem;
    letter-spacing: -0.02em;
  }

  .project-tagline {
    font-size: clamp(1.25rem, 3vw, 1.5rem);
    color: var(--text-secondary);
    max-width: 800px;
    line-height: 1.6;
    font-weight: 300;
  }

  .project-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    align-items: center;
    justify-content: space-between;
    margin-top: 3rem;
    padding-top: 3rem;
    border-top: 1px solid var(--border-color);
  }

  .tech-stack {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
  }

  .tech-badge {
    padding: 0.5rem 1rem;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-color);
    border-radius: 100px;
    font-size: 0.875rem;
    color: var(--text-primary);
    font-weight: 400;
    letter-spacing: 0.05em;
  }

  .project-links {
    display: flex;
    gap: 1rem;
  }

  .primary-btn, .secondary-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.875rem 1.5rem;
    font-size: 0.875rem;
    font-weight: 500;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    text-decoration: none;
    transition: all 0.3s ease;
  }

  .primary-btn {
    background: var(--text-primary);
    color: var(--bg-primary);
  }

  .primary-btn:hover {
    background: #e4e4e7;
    transform: translateY(-2px);
  }

  .secondary-btn {
    background: transparent;
    color: var(--text-primary);
    border: 1px solid var(--border-color);
  }

  .secondary-btn:hover {
    background: rgba(255, 255, 255, 0.05);
    transform: translateY(-2px);
  }

  .hero-image {
    width: 100%;
    border-radius: 8px;
    overflow: hidden;
    position: relative;
    aspect-ratio: 16/9;
    border: 1px solid var(--border-color);
  }

  .hero-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* Overview Grid */
  .overview-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 3rem;
    padding: 3rem 0;
    border-top: 1px solid var(--border-color);
    border-bottom: 1px solid var(--border-color);
  }

  .overview-item h3 {
    font-size: 0.875rem;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 1rem;
    font-weight: 400;
  }

  .overview-item p {
    font-size: 1.125rem;
    color: var(--text-primary);
    font-weight: 300;
    line-height: 1.5;
  }

  /* Architecture Box */
  .arch-card {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 2rem;
    margin-bottom: 2rem;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
  }

  .arch-item {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .arch-label {
    font-size: 0.875rem;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.1em;
  }

  .arch-value {
    font-size: 1rem;
    color: var(--text-primary);
    font-weight: 400;
  }

  .arch-reason {
    font-size: 1rem;
    line-height: 1.8;
    color: var(--text-secondary);
    font-weight: 300;
  }

  .arch-reason strong {
    color: var(--text-primary);
    font-weight: 400;
  }

  /* Features List */
  .features-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: grid;
    gap: 1.5rem;
  }

  .features-list li {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    font-size: 1.125rem;
    color: var(--text-secondary);
    line-height: 1.6;
    font-weight: 300;
  }

  .features-list svg {
    color: var(--text-primary);
    flex-shrink: 0;
    margin-top: 0.125rem;
  }

  /* Challenges List */
  .challenges-list {
    display: grid;
    gap: 2rem;
  }

  .challenge-card {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    overflow: hidden;
  }

  .challenge-part, .solution-part {
    padding: 2rem;
  }

  .challenge-part {
    border-bottom: 1px solid var(--border-color);
  }

  .solution-part {
    background: rgba(255, 255, 255, 0.01);
  }

  .challenge-card h4 {
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 1rem;
    font-weight: 400;
  }

  .challenge-part h4 {
    color: #ef4444; /* red-500 */
  }

  .solution-part h4 {
    color: #22c55e; /* green-500 */
  }

  .challenge-card p {
    font-size: 1.125rem;
    color: var(--text-secondary);
    line-height: 1.6;
    font-weight: 300;
    margin: 0;
  }

  /* Impact Card */
  .impact-card {
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 3rem;
    text-align: center;
  }

  .impact-icon {
    color: #eab308; /* yellow-500 */
    margin-bottom: 1.5rem;
  }

  /* Bottom Nav */
  .bottom-nav {
    padding: 8rem 0;
    text-align: center;
    border-top: 1px solid var(--border-color);
  }

  .cta-title {
    font-size: clamp(2rem, 4vw, 3rem);
    font-weight: 300;
    margin-bottom: 3rem;
    color: var(--text-primary);
  }

  /* Responsiveness */
  @media (max-width: 768px) {
    .content-section {
      padding: 4rem 0;
    }
    
    .hero-section {
      padding-top: 2rem;
    }

    .project-meta {
      flex-direction: column;
      align-items: flex-start;
      gap: 2rem;
    }

    .project-links {
      width: 100%;
      flex-direction: column;
    }

    .primary-btn, .secondary-btn {
      width: 100%;
      justify-content: center;
    }
    
    .arch-card {
      grid-template-columns: 1fr 1fr;
    }
    
    .overview-grid {
      grid-template-columns: 1fr;
      gap: 2rem;
    }
    
    .impact-card {
      padding: 2rem;
    }
  }
</style>
